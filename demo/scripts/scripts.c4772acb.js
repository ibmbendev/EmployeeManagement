"use strict";var myApp=angular.module("employeeManagementV20App",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.bootstrap"]);myApp.config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/loginPage.html",controller:"loginPageCtrl"}).when("/createNewUser",{templateUrl:"views/signUpPage.html",controller:"loginPageCtrl"}).when("/userPage",{templateUrl:"views/userPage.html",controller:"loginPageCtrl"}).when("/addEmployee",{templateUrl:"addEmployeeTemplate.html",controller:"loginPageCtrl"}).when("/addProject",{templateUrl:"addProjectTemplate.html",controller:"loginPageCtrl"}).when("/addTechnology",{templateUrl:"addTechnologyTemplate.html",controller:"loginPageCtrl"}).when("/userAccount",{templateUrl:"userAccountTemplate.html"}).when("/userSettings",{templateUrl:"userSettingsTemplate.html"}).when("/userInfo",{templateUrl:"userInfoTemplate.html"}).otherwise({redirectTo:"/"})}]),myApp.run(["$rootScope","$log","$location",function(a,b,c){a.$on("$routeChangeStart",function(){b.log("Route changed.","$routeParams : ",c.url()),"/"==c.url()&&1==a.showUserName&&c.path("/userPage"),"/userPage"==c.url()&&0==a.showUserName&&c.path("/")})}]),angular.module("employeeManagementV20App").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("employeeManagementV20App").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),myApp.controller("navbarCtrl",["$scope","$rootScope","$log","$location",function(a,b,c,d){b.showUserName=!1,b.signedInUser="",b.currentPath="",a.logout=function(){d.path("/"),b.currentPath="/",b.showUserName=!1}}]),myApp.controller("loginPageCtrl",["$scope","$rootScope","$log","$modal","$location","$routeParams","getDataFactory",function(a,b,c,d,e,f,g){a.selectedProjects={},a.selectedTechnologies={},a.clickedStaySigned="",a.empAccordion=12,a.projAccordion=12,a.techAccordion=12,a.showEmpCheckBoxes=!1,a.showProjCheckBoxes=!1,a.showTechCheckBoxes=!1,a.empOrderBy="name",a.projOrderBy="projects",a.techOrderBy="technology",a.wholeData=g.getWholeData(),c.info("$scope.wholeData :: ",a.wholeData),a.users=a.wholeData.users,a.employees=a.wholeData.employees,a.projects=a.wholeData.projects,a.technologies=a.wholeData.technologies,jQuery("#signupSuccess").hide(),jQuery("#errorLogin").hide(),jQuery("#signupError").hide(),jQuery("#multiPurposeAlert").hide(),a.alertClass="success",a.alertText="The record has been added successfully",a.authenticateUser=function(d,f){var g=!1;a.users.forEach(function(a){(a.uname==d||a.email==d)&&a.pwd==f&&(g=!0,b.signedInUser=a.uname)}),1==g?(b.showUserName=!0,c.info(1==a.clickedStaySigned?"In Stay signed in checked.":"In   Stay signed in unchecked."),e.path("/userPage"),b.currentPath="/userPage"):(jQuery("#errorLogin").slideDown(),setTimeout(function(){jQuery("#errorLogin").slideUp()},4e3))},a.createNewUser=function(){a.newUser.pwd==a.newUser.pwd2?(a.newUser={uname:a.newUser.name,pwd:a.newUser.pwd,email:a.newUser.email},a.users.push(a.newUser),e.path("/")):(jQuery("#signupError").slideDown(),setTimeout(function(){jQuery("#signupError").slideUp()},4e3),c.error("Passwords mismatch. Please fill the correct data to create an account.")),setTimeout(function(){jQuery("#signupSuccess").slideDown()},10),setTimeout(function(){jQuery("#signupSuccess").slideUp()},4e3),c.info("$scope.newUser",a.newUser)},a.deleteSingleRecord=function(b,c){if("employees"==b){var d=a.employees.indexOf(c);a.employees.splice(d,1)}else if("projects"==b){var d=a.projects.indexOf(c);a.projects.splice(d,1)}else if("technologies"==b){var d=a.technologies.indexOf(c);a.technologies.splice(d,1)}a.alertClass="success",a.alertText="The record has been deleted successfully",jQuery("#multiPurposeAlert").slideDown(),setTimeout(function(){jQuery("#multiPurposeAlert").slideUp()},4e3)},a.selectMultipleRecords=function(b){"employees"==b?(a.showEmpCheckBoxes=!a.showEmpCheckBoxes,a.empAccordion=11):"projects"==b?(a.showProjCheckBoxes=!a.showProjCheckBoxes,a.projAccordion=11):"technologies"==b&&(a.showTechCheckBoxes=!a.showTechCheckBoxes,a.techAccordion=11)},a.cancelMultipleRecords=function(b){"employees"==b?(a.showEmpCheckBoxes=!a.showEmpCheckBoxes,a.empAccordion=12):"projects"==b?(a.showProjCheckBoxes=!a.showProjCheckBoxes,a.projAccordion=12):"technologies"==b&&(a.showTechCheckBoxes=!a.showTechCheckBoxes,a.techAccordion=12)},a.empMarkedArr=[],a.projMarkedArr=[],a.techMarkedArr=[],a.markRecordsToDelete=function(b,c){if("employees"==b){a.empMarkedArr.push(c);for(var d=0;d<a.empMarkedArr.length;d++)for(var e=d+1;e<a.empMarkedArr.length;e++)a.empMarkedArr[d]==a.empMarkedArr[e]&&(a.empMarkedArr.splice(e,1),a.empMarkedArr.splice(d,1))}if("projects"==b){a.projMarkedArr.push(c);for(var d=0;d<a.projMarkedArr.length;d++)for(var e=d+1;e<a.projMarkedArr.length;e++)a.projMarkedArr[d]==a.projMarkedArr[e]&&(a.projMarkedArr.splice(e,1),a.projMarkedArr.splice(d,1))}if("technologies"==b){a.techMarkedArr.push(c);for(var d=0;d<a.techMarkedArr.length;d++)for(var e=d+1;e<a.techMarkedArr.length;e++)a.techMarkedArr[d]==a.techMarkedArr[e]&&(a.techMarkedArr.splice(e,1),a.techMarkedArr.splice(d,1))}},a.deleteMultipleRecords=function(b){if("employees"==b){a.showEmpCheckBoxes=!a.showEmpCheckBoxes,a.empAccordion=12;var c=0;angular.forEach(a.empMarkedArr,function(b){var d=a.employees.indexOf(b);a.employees.splice(d,1),c+=1}),a.empMarkedArr=[]}else if("projects"==b){a.showProjCheckBoxes=!a.showProjCheckBoxes,a.projAccordion=12;var c=0;angular.forEach(a.projMarkedArr,function(b){var d=a.projects.indexOf(b);a.projects.splice(d,1),c+=1}),a.projMarkedArr=[],a.selectedProjects={}}else if("technologies"==b){a.showTechCheckBoxes=!a.showTechCheckBoxes,a.techAccordion=12;var c=0;angular.forEach(a.techMarkedArr,function(b){var d=a.technologies.indexOf(b);a.technologies.splice(d,1),c+=1}),a.techMarkedArr=[],a.selectedTechnologies={}}c>0?(a.alertClass="success",a.alertText="The marked records have been deleted successfully",jQuery("#multiPurposeAlert").slideDown(),setTimeout(function(){jQuery("#multiPurposeAlert").slideUp()},4e3)):(a.alertClass="info",a.alertText="No record has been marked. So no record has been deleted",jQuery("#multiPurposeAlert").slideDown(),setTimeout(function(){jQuery("#multiPurposeAlert").slideUp()},4e3))},a.addNewRecord=function(a){"employees"==a?(c.log("hgfhfhgfhg"),e.path("/addEmployee")):"projects"==a?e.path("/addProject"):"technologies"==a&&e.path("/addTechnology")},a.discardRecord=function(){e.path("/userPage")},a.commitRecord=function(b,c){"employees"==b?(a.employees.push(c),e.path("/userPage")):"projects"==b?(a.projects.push(c),e.path("/userPage")):"technologies"==b&&(a.technologies.push(c),e.path("/userPage")),setTimeout(function(){jQuery("#multiPurposeAlert").slideDown()},10),setTimeout(function(){jQuery("#multiPurposeAlert").slideUp()},4e3)},a.openEditModal=function(b,e){var f;if(a.currentData={},"employees"==b){var g=a.employees[e].name,h=a.employees[e].empid,i=a.employees[e].designation,j=a.employees[e].platform,k=a.employees[e].email,l=a.employees[e].phone,m=a.employees[e].dob;a.currentData={name:g,empid:h,designation:i,platform:j,email:k,phone:l,dob:m},f="editEmployeeTemplate.html"}else if("projects"==b){var n=a.projects[e].project,o=a.projects[e].members,p=a.projects[e].release,q=a.projects[e].duration;a.currentData={project:n,members:o,release:p,duration:q},f="editProjectTemplate.html"}else if("technologies"==b){var r=a.technologies[e].technology,s=a.technologies[e].version,q=a.technologies[e].duration,t=a.technologies[e].usingin;a.currentData={technology:r,version:s,duration:q,usingin:t},f="editTechnologyTemplate.html"}var u=d.open({templateUrl:f,controller:"ModalInstanceCtrl",resolve:{getCurrentData:function(){return a.currentData}}});u.result.then(function(){"employees"==b?a.employees[e]=a.currentData:"projects"==b?a.projects[e]=a.currentData:"technologies"==b&&(a.technologies[e]=a.currentData),a.alertClass="success",a.alertText="The record has been updated successfully",jQuery("#multiPurposeAlert").slideDown(),setTimeout(function(){jQuery("#multiPurposeAlert").slideUp()},4e3),c.info("Record updated at : "+new Date)},function(){c.info("Modal dismissed at : "+new Date)})}}]),myApp.controller("ModalInstanceCtrl",["$scope","$log","$modalInstance","getCurrentData",function(a,b,c,d){a.items=d,a.updateRecord=function(){b.log("$scope.items:",a.items),c.close("ok")},a.discardUpdate=function(){c.dismiss("cancel")}}]),myApp.factory("getDataFactory",["$http","$q","$log",function(a,b,c){function d(){var c="api/mainData.json",d=b.defer();return a.get(c).then(function(a){d.resolve(a.data)},function(a){d.reject(a)}),d.promise}var e={},f=d();c.log("promise :: ",f);var g={};return f.then(function(a){c.log("Call Back :: ",a),g=a,c.info("wholeData :: ",g)},function(a){c.error("Err Back :: ",a)},function(a){c.log("Progress Back :: ",a)}),e.getWholeData=function(){return g},e}]),myApp.directive("",function(){});